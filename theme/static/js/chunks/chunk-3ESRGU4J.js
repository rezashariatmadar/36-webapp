var a="",p=e=>{let o=`; ${document.cookie}`.split(`; ${e}=`);return o.length!==2?"":o.pop().split(";").shift()||""},l=e=>{e&&(a=e)},h=async(e,n={})=>{let o=n.method||"GET",t=new Headers(n.headers||{});t.set("Accept","application/json");let i=!["GET","HEAD","OPTIONS"].includes(o.toUpperCase());i&&!t.has("Content-Type")&&t.set("Content-Type","application/json"),i&&!t.has("X-CSRFToken")&&t.set("X-CSRFToken",a||p("csrftoken"));let r=await fetch(e,{...n,method:o,headers:t,credentials:"same-origin"}),s=null;try{s=await r.json()}catch{s=null}if(!r.ok){let c=s?.detail||s?.errors||`HTTP ${r.status}`;throw new Error(typeof c=="string"?c:JSON.stringify(c))}return s};export{l as a,h as b};
