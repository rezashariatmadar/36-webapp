## Private Network: frontend and backend must be in the same Liara private network.
## Backend app id: webapp36-api, backend port: 8000
location /api/ {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location /admin/ {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location /media/ {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location /static/ {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location = /robots.txt {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location = /sitemap.xml {
    proxy_pass http://webapp36-api:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
}

location ~* \.(?:css(\.map)?|js(\.map)?|json)$ {
    root /usr/src/app/build;
    expires 7d;
    access_log off;
}

location ~* \.(?:ico|gif|jpe?g|png|webp|svg)$ {
    root /usr/src/app/build;
    expires 7d;
    access_log off;
}

location / {
    root /usr/src/app/build;
    index index.html;
    try_files $uri /index.html;
}
